@let step = this.step();

<ion-card>
    <ion-card-header>
        <ion-card-title>{{ step.title }}</ion-card-title>
        <ion-button
            class="close"
            fill="clear"
            shape="round"
            (click)="tourService.end()"
        >
            <ion-icon slot="icon-only" name="close-outline"/>
        </ion-button>
    </ion-card-header>

    <ion-card-content
        [innerHTML]="step.content"
    />

    <div
        class="footer"
        [class.no-progress]="!step.showProgress"
    >
        <ion-button
            fill="clear"
            [disabled]="!tourService.hasPrev(step)"
            (click)="tourService.prev()"
        >
            <ion-icon slot="start" name="chevron-back-outline"/>
            {{ step.prevBtnTitle }}
        </ion-button>
        @if (step.showProgress) {
            <div class="progress">{{ tourService.steps.indexOf(step) + 1 }} / {{ tourService.steps.length }}</div>
        }
        @if (tourService.hasNext(step) && !step.nextOnAnchorClick) {
            <ion-button
                fill="clear"
                (click)="tourService.next()"
            >
                {{ step.nextBtnTitle }}
                <ion-icon slot="end" name="chevron-forward-outline"/>
            </ion-button>
        }
        @if (!tourService.hasNext(step)) {
            <ion-button
                fill="clear"
                (click)="tourService.end()"
            >
                {{ step.endBtnTitle }}
            </ion-button>
        }
    </div>
</ion-card>
